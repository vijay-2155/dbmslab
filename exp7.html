<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Database Lab Experiments</title>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Prism CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-okaidia.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-sql.min.js"></script>
    
    <style>
        .token.keyword { color: #569CD6; }
        .token.string { color: #CE9178; }
        .token.number { color: #B5CEA8; }
        .token.function { color: #DCDCAA; }
        .language-sql { color: #D4D4D4; }
        pre[class*="language-"] {
            background: #1E1E1E !important;
            margin: 0;
        }
    </style>
</head>
<body class="bg-gray-50">
    <div class="flex flex-col md:flex-row min-h-screen">
        <div id="sidebar" class="hidden md:block w-full md:w-72 bg-gradient-to-b from-gray-800 to-gray-900 text-white p-6 shadow-xl">
            <!-- Sidebar content will be generated by JavaScript -->
        </div>

        <div class="flex-1 p-4 md:p-8 overflow-y-auto">
            <div class="max-w-4xl mx-auto">
                <!-- Header -->
                <div class="bg-white rounded-xl shadow-lg p-4 md:p-6 mb-8">
                    <h1 class="text-2xl md:text-3xl font-bold text-gray-800 mb-4">Experiment 6: Control Structures in PL/SQL</h1>
                    <div class="flex flex-col md:flex-row items-start md:items-center text-sm text-gray-500">
                        <span class="mb-2 md:mb-0 md:mr-4">üìÖ Date: May 5, 2025</span>
                        <span>‚è±Ô∏è Duration: 2 hours</span>
                    </div>
                </div>

                <!-- Aim Section -->
                <section class="mb-8">
                    <h2 class="text-2xl font-semibold text-gray-700 mb-4">Aim</h2>
                    <p class="text-gray-600">
                        To understand and implement control structures including NESTED IF, CASE statements, CASE expressions, and related functions (NULLIF, COALESCE) in PL/SQL.
                    </p>
                </section>
                
                <!-- Theory Section -->
                <section class="mb-8 bg-white p-6 rounded-lg shadow-lg">
                    <h2 class="text-2xl font-semibold text-gray-700 mb-4">Theory</h2>
                    <div class="space-y-4">
                        <p class="text-gray-600">
                            Control structures in PL/SQL are programming constructs that allow you to control the flow of program execution. The main control structures include:
                        </p>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                            <div class="bg-gray-50 rounded-lg p-4 border border-gray-200">
                                <h3 class="text-blue-600 font-semibold mb-2">Nested IF Statements</h3>
                                <p class="text-gray-600">Allow multiple levels of conditional logic, where one IF statement is contained within another. This enables complex decision-making based on multiple conditions.</p>
                            </div>

                            <div class="bg-gray-50 rounded-lg p-4 border border-gray-200">
                                <h3 class="text-green-600 font-semibold mb-2">CASE Statements</h3>
                                <p class="text-gray-600">Provide a way to choose between several alternatives based on a condition or value. They can replace complex IF-THEN-ELSIF constructs and make code more readable.</p>
                            </div>
                        </div>

                        <h3 class="text-lg font-semibold text-gray-700 mt-6 mb-3">Special Functions</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="bg-gray-50 rounded-lg p-4 border border-gray-200">
                                <h4 class="text-purple-600 font-semibold mb-2">NULLIF Function</h4>
                                <p class="text-gray-600">Compares two expressions and returns NULL if they are equal, or the first expression if they are different. Useful for handling special cases in comparisons.</p>
                            </div>

                            <div class="bg-gray-50 rounded-lg p-4 border border-gray-200">
                                <h4 class="text-orange-600 font-semibold mb-2">COALESCE Function</h4>
                                <p class="text-gray-600">Returns the first non-NULL expression in a list. Commonly used to provide default values or handle NULL values in expressions.</p>
                            </div>
                        </div>

                        <div class="bg-blue-50 p-4 rounded-lg mt-6">
                            <h3 class="text-blue-800 font-semibold mb-2">Key Points:</h3>
                            <ul class="list-disc list-inside text-gray-600 space-y-2">
                                <li>Control structures help manage program flow and implement business logic</li>
                                <li>Nested IF statements allow for complex conditional processing</li>
                                <li>CASE statements provide a cleaner alternative to multiple IF-THEN-ELSIF constructs</li>
                                <li>NULLIF and COALESCE are useful for handling NULL values and providing defaults</li>
                                <li>These structures can be combined to create sophisticated program logic</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <!-- Syntax Section -->
                <section class="mb-8 bg-white p-6 rounded-lg shadow-lg">
                    <h2 class="text-2xl font-semibold text-gray-700 mb-4">Syntax Reference</h2>
                    
                    <!-- Control Structures Syntax -->
                    <div class="mb-6">
                        <h3 class="text-xl text-blue-600 font-semibold mb-3">Nested IF Statement</h3>
                        <div class="bg-[#1E1E1E] rounded-lg p-4 relative">
                            <button class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded absolute top-4 right-4 copy-button">Copy</button>
                            <pre><code class="language-sql">
IF condition1 THEN
    statements1;
    IF condition2 THEN
        statements2;
    ELSE
        statements3;
    END IF;
ELSE
    statements4;
END IF;</code></pre>
                        </div>
                    </div>

                    <div class="mb-6">
                        <h3 class="text-xl text-blue-600 font-semibold mb-3">CASE Statement</h3>
                        <div class="bg-[#1E1E1E] rounded-lg p-4 relative">
                            <button class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded absolute top-4 right-4 copy-button">Copy</button>
                            <pre><code class="language-sql">
CASE
    WHEN condition1 THEN result1;
    WHEN condition2 THEN result2;
    ...
    ELSE result_else;
END CASE;</code></pre>
                        </div>
                    </div>

                    <div class="mb-6">
                        <h3 class="text-xl text-blue-600 font-semibold mb-3">CASE Expression</h3>
                        <div class="bg-[#1E1E1E] rounded-lg p-4 relative">
                            <button class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded absolute top-4 right-4 copy-button">Copy</button>
                            <pre><code class="language-sql">
CASE expression
    WHEN value1 THEN result1
    WHEN value2 THEN result2
    ...
    ELSE result_else
END</code></pre>
                        </div>
                    </div>

                    <div class="mb-6">
                        <h3 class="text-xl text-blue-600 font-semibold mb-3">NULLIF and COALESCE</h3>
                        <div class="bg-[#1E1E1E] rounded-lg p-4 relative">
                            <button class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded absolute top-4 right-4 copy-button">Copy</button>
                            <pre><code class="language-sql">
-- NULLIF returns NULL if expr1 equals expr2
NULLIF(expr1, expr2)

-- COALESCE returns first non-null expression
COALESCE(expr1, expr2, ..., expr_n)</code></pre>
                        </div>
                    </div>
                </section>

                <!-- Sample Tables -->
                <section class="mb-8">
                    <h2 class="text-2xl font-semibold text-gray-700 mb-4">Sample Database</h2>
                    <div class="bg-gray-800 text-white p-4 rounded-lg mb-4 relative">
                        <button class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded absolute top-4 right-4 copy-button">Copy</button>
                        <pre><code class="language-sql">
-- Create employee table
CREATE TABLE employees (
    emp_id NUMBER PRIMARY KEY,
    name VARCHAR2(50),
    salary NUMBER,
    department VARCHAR2(50),
    performance_rating NUMBER,
    bonus NUMBER
);

-- Insert sample data
INSERT INTO employees VALUES (1, 'John Doe', 50000, 'IT', 4, NULL);
INSERT INTO employees VALUES (2, 'Jane Smith', 60000, 'HR', 5, 5000);
INSERT INTO employees VALUES (3, 'Mike Johnson', 45000, 'IT', 3, NULL);
INSERT INTO employees VALUES (4, 'Sarah Wilson', 55000, 'Finance', NULL, 3000);
COMMIT;</code></pre>
                    </div>
                </section>

                <!-- Example Code -->
                <section class="mb-8">
                    <h2 class="text-2xl font-semibold text-gray-700 mb-4">PL/SQL Examples</h2>
                    <div class="bg-gray-800 text-white p-4 rounded-lg mb-4 relative">
                        <button class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded absolute top-4 right-4 copy-button">Copy</button>
                        <pre><code class="language-sql">
-- Example using Nested IF and CASE
DECLARE
    v_emp_id employees.emp_id%TYPE := 1;
    v_salary employees.salary%TYPE;
    v_rating employees.performance_rating%TYPE;
    v_bonus employees.bonus%TYPE;
    v_category VARCHAR2(20);
BEGIN
    SELECT salary, performance_rating, bonus 
    INTO v_salary, v_rating, v_bonus
    FROM employees 
    WHERE emp_id = v_emp_id;

    -- Nested IF example
    IF v_rating IS NOT NULL THEN
        IF v_rating >= 4 THEN
            v_bonus := COALESCE(v_bonus, 0) + (v_salary * 0.1);
        ELSE
            v_bonus := COALESCE(v_bonus, 0) + (v_salary * 0.05);
        END IF;
    END IF;

    -- CASE statement example
    CASE
        WHEN v_salary >= 60000 THEN
            v_category := 'Senior Level';
        WHEN v_salary >= 50000 THEN
            v_category := 'Mid Level';
        ELSE
            v_category := 'Junior Level';
    END CASE;

    -- Using CASE expression and NULLIF
    v_rating := CASE NULLIF(v_rating, 0)
        WHEN 5 THEN 'Excellent'
        WHEN 4 THEN 'Good'
        WHEN 3 THEN 'Average'
        ELSE 'Needs Improvement'
    END;

    DBMS_OUTPUT.PUT_LINE('Employee Category: ' || v_category);
    DBMS_OUTPUT.PUT_LINE('Performance: ' || v_rating);
    DBMS_OUTPUT.PUT_LINE('Updated Bonus: ' || v_bonus);

EXCEPTION
    WHEN NO_DATA_FOUND THEN
        DBMS_OUTPUT.PUT_LINE('Employee not found');
    WHEN OTHERS THEN
        DBMS_OUTPUT.PUT_LINE('Error occurred');
END;
/</code></pre>
                    </div>
                </section>

                <!-- Output Section -->
                <section class="mb-8">
                    <h2 class="text-xl md:text-2xl font-semibold text-gray-700 mb-4">Sample Output</h2>
                    <div class="bg-green-50 border border-green-200 p-4 rounded-lg">
                        <h3 class="text-green-800 font-semibold mb-2">Execution Result</h3>
                        <pre class="text-green-800">
Employee Category: Mid Level
Performance: Good
Updated Bonus: 5000</pre>
                    </div>
                </section>
            </div>
        </div>
    </div>
    <script src="js/main.js"></script>
</body>
</html>
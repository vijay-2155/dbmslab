<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Database Lab Experiments</title>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Prism CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-okaidia.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-sql.min.js"></script>
    
    <style>
        .token.keyword { color: #569CD6; }
        .token.string { color: #CE9178; }
        .token.number { color: #B5CEA8; }
        .token.function { color: #DCDCAA; }
        .language-sql { color: #D4D4D4; }
        pre[class*="language-"] {
            background: #1E1E1E !important;
            margin: 0;
        }
    </style>
</head>
<body class="bg-gray-50">
    <div class="flex flex-col md:flex-row min-h-screen">
        <div id="sidebar" class="hidden md:block w-full md:w-72 bg-gradient-to-b from-gray-800 to-gray-900 text-white p-6 shadow-xl">
            <!-- Sidebar content will be generated by JavaScript -->
        </div>

        <div class="flex-1 p-4 md:p-8 overflow-y-auto">
            <div class="max-w-4xl mx-auto">
                <!-- Header -->
                <div class="bg-white rounded-xl shadow-lg p-4 md:p-6 mb-8">
                    <h1 class="text-2xl md:text-3xl font-bold text-gray-800 mb-4">Experiment 7: Loops and Exception Handling in PL/SQL</h1>
                    <div class="flex flex-col md:flex-row items-start md:items-center text-sm text-gray-500">
                        <span class="mb-2 md:mb-0 md:mr-4">üìÖ Date: May 5, 2025</span>
                        <span>‚è±Ô∏è Duration: 2 hours</span>
                    </div>
                </div>

                <!-- Aim Section -->
                <section class="mb-8">
                    <h2 class="text-2xl font-semibold text-gray-700 mb-4">Aim</h2>
                    <p class="text-gray-600">
                        To understand and implement different types of loops (WHILE, FOR, Nested) and exception handling mechanisms (Built-in, User-defined, RAISE_APPLICATION_ERROR) in PL/SQL.
                    </p>
                </section>

                <!-- Theory Section -->
                <section class="mb-8 bg-white p-6 rounded-lg shadow-lg">
                    <h2 class="text-2xl font-semibold text-gray-700 mb-4">Theory</h2>
                    <div class="space-y-4">
                        <div class="mb-6">
                            <h3 class="text-xl text-blue-600 font-semibold mb-3">Loops in PL/SQL</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div class="bg-gray-50 rounded-lg p-4 border border-gray-200">
                                    <h4 class="text-blue-700 font-semibold mb-2">WHILE Loop</h4>
                                    <p class="text-gray-600">Executes a sequence of statements while a condition is true. The condition is evaluated before each iteration.</p>
                                </div>
                                <div class="bg-gray-50 rounded-lg p-4 border border-gray-200">
                                    <h4 class="text-blue-700 font-semibold mb-2">FOR Loop</h4>
                                    <p class="text-gray-600">Iterates over a range of integers or a collection. The number of iterations is determined before the loop starts.</p>
                                </div>
                            </div>
                        </div>

                        <div class="mb-6">
                            <h3 class="text-xl text-red-600 font-semibold mb-3">Exception Handling</h3>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div class="bg-gray-50 rounded-lg p-4 border border-gray-200">
                                    <h4 class="text-red-700 font-semibold mb-2">Built-in Exceptions</h4>
                                    <p class="text-gray-600">Pre-defined exceptions raised automatically by Oracle (NO_DATA_FOUND, TOO_MANY_ROWS, etc.)</p>
                                </div>
                                <div class="bg-gray-50 rounded-lg p-4 border border-gray-200">
                                    <h4 class="text-red-700 font-semibold mb-2">User-defined Exceptions</h4>
                                    <p class="text-gray-600">Custom exceptions declared by the programmer to handle specific business rules</p>
                                </div>
                                <div class="bg-gray-50 rounded-lg p-4 border border-gray-200">
                                    <h4 class="text-red-700 font-semibold mb-2">RAISE_APPLICATION_ERROR</h4>
                                    <p class="text-gray-600">Raises an exception with a custom error number and message</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Syntax Section -->
                <section class="mb-8">
                    <h2 class="text-2xl font-semibold text-gray-700 mb-4">Syntax Reference</h2>
                    
                    <!-- Loop Syntax -->
                    <div class="bg-gray-800 text-white p-4 rounded-lg mb-4 relative">
                        <button class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded absolute top-4 right-4 copy-button">Copy</button>
                        <pre><code class="language-sql">
-- WHILE Loop
WHILE condition LOOP
    statements;
END LOOP;

-- FOR Loop
FOR counter IN [REVERSE] lower_bound..upper_bound LOOP
    statements;
END LOOP;

-- Nested Loop
FOR i IN 1..3 LOOP
    FOR j IN 1..3 LOOP
        statements;
    END LOOP;
END LOOP;</code></pre>
                    </div>

                    <!-- Exception Handling Syntax -->
                    <div class="bg-gray-800 text-white p-4 rounded-lg mb-4 relative">
                        <button class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded absolute top-4 right-4 copy-button">Copy</button>
                        <pre><code class="language-sql">
-- Exception Handling Structure
DECLARE
    custom_exception EXCEPTION;
BEGIN
    -- Main block
    IF condition THEN
        RAISE custom_exception;
    END IF;
EXCEPTION
    WHEN NO_DATA_FOUND THEN
        -- Handle built-in exception
        NULL;
    WHEN custom_exception THEN
        -- Handle user-defined exception
        RAISE_APPLICATION_ERROR(-20001, 'Custom error message');
    WHEN OTHERS THEN
        -- Handle all other exceptions
        NULL;
END;</code></pre>
                    </div>
                </section>

                <!-- Example Code -->
                <section class="mb-8">
                    <h2 class="text-2xl font-semibold text-gray-700 mb-4">Implementation Examples</h2>
                    
                    <!-- Program 1: Loops Example -->
                    <div class="mb-6">
                        <h3 class="text-xl text-blue-600 font-semibold mb-3">Program 1: Multiplication Table using Different Loops</h3>
                        <div class="bg-gray-800 text-white p-4 rounded-lg mb-4 relative">
                            <button class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded absolute top-4 right-4 copy-button">Copy</button>
                            <pre><code class="language-sql">
DECLARE
    -- Variables for loops
    v_number NUMBER := 5;
    v_counter NUMBER := 1;
    v_result NUMBER;
BEGIN
    DBMS_OUTPUT.PUT_LINE('Using WHILE Loop:');
    -- WHILE loop for first 5 multiples
    WHILE v_counter <= 5 LOOP
        v_result := v_number * v_counter;
        DBMS_OUTPUT.PUT_LINE(v_number || ' x ' || v_counter || ' = ' || v_result);
        v_counter := v_counter + 1;
    END LOOP;
    
    DBMS_OUTPUT.PUT_LINE(CHR(10) || 'Using FOR Loop:');
    -- FOR loop for next 5 multiples
    FOR i IN 6..10 LOOP
        v_result := v_number * i;
        DBMS_OUTPUT.PUT_LINE(v_number || ' x ' || i || ' = ' || v_result);
    END LOOP;
    
    DBMS_OUTPUT.PUT_LINE(CHR(10) || 'Using Nested FOR Loop (2x2 pattern):');
    -- Nested FOR loop for multiplication pattern
    FOR i IN 1..2 LOOP
        FOR j IN 1..2 LOOP
            v_result := i * j;
            DBMS_OUTPUT.PUT_LINE(i || ' x ' || j || ' = ' || v_result);
        END LOOP;
        DBMS_OUTPUT.PUT_LINE('---');
    END LOOP;
END;
/</code></pre>
                        </div>
                    </div>

                    <!-- Program 2: Exception Handling Example -->
                    <div class="mb-6">
                        <h3 class="text-xl text-red-600 font-semibold mb-3">Program 2: Student Grade Calculator with Exception Handling</h3>
                        <div class="bg-gray-800 text-white p-4 rounded-lg mb-4 relative">
                            <button class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded absolute top-4 right-4 copy-button">Copy</button>
                            <pre><code class="language-sql">
DECLARE
    -- Variables and custom exceptions
    v_marks NUMBER;
    v_grade CHAR(1);
    invalid_marks EXCEPTION;
    PRAGMA EXCEPTION_INIT(invalid_marks, -20001);
    failing_grade EXCEPTION;
    
BEGIN
    -- Test different marks values
    FOR v_marks IN -10..110 LOOP
        BEGIN
            -- Validate marks range
            IF v_marks < 0 OR v_marks > 100 THEN
                RAISE_APPLICATION_ERROR(-20001, 'Invalid marks: ' || v_marks || 
                                     '. Marks must be between 0 and 100');
            END IF;
            
            -- Calculate grade
            v_grade := 
                CASE 
                    WHEN v_marks >= 90 THEN 'A'
                    WHEN v_marks >= 80 THEN 'B'
                    WHEN v_marks >= 70 THEN 'C'
                    WHEN v_marks >= 60 THEN 'D'
                    ELSE 'F'
                END;
            
            -- Check for failing grade
            IF v_grade = 'F' THEN
                RAISE failing_grade;
            END IF;
            
            DBMS_OUTPUT.PUT_LINE('Marks: ' || v_marks || ', Grade: ' || v_grade);
            
        EXCEPTION
            WHEN invalid_marks THEN
                DBMS_OUTPUT.PUT_LINE(SQLERRM);
            WHEN failing_grade THEN
                DBMS_OUTPUT.PUT_LINE('Marks: ' || v_marks || 
                                   ' - Failed! Need minimum 60 marks to pass');
            WHEN OTHERS THEN
                DBMS_OUTPUT.PUT_LINE('Unexpected error: ' || SQLERRM);
        END;
    END LOOP;
END;
/</code></pre>
                        </div>
                    </div>

                    <!-- Updated Output Section -->
                    <section class="mb-8">
                        <h2 class="text-xl md:text-2xl font-semibold text-gray-700 mb-4">Sample Outputs</h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="bg-green-50 border border-green-200 p-4 rounded-lg">
                                <h3 class="text-green-800 font-semibold mb-2">Program 1 Output:</h3>
                                <pre class="text-green-800">
Using WHILE Loop:
5 x 1 = 5
5 x 2 = 10
5 x 3 = 15
5 x 4 = 20
5 x 5 = 25

Using FOR Loop:
5 x 6 = 30
5 x 7 = 35
5 x 8 = 40
5 x 9 = 45
5 x 10 = 50

Using Nested FOR Loop:
1 x 1 = 1
1 x 2 = 2
---
2 x 1 = 2
2 x 2 = 4
---</pre>
                            </div>
                            <div class="bg-green-50 border border-green-200 p-4 rounded-lg">
                                <h3 class="text-green-800 font-semibold mb-2">Program 2 Output:</h3>
                                <pre class="text-green-800">
Invalid marks: -10. Marks must be between 0 and 100
Marks: 55 - Failed! Need minimum 60 marks to pass
Marks: 75, Grade: C
Marks: 95, Grade: A
Invalid marks: 110. Marks must be between 0 and 100</pre>
                            </div>
                        </div>
                    </section>
                </section>
            </div>
        </div>
    </div>
    <script src="js/main.js"></script>
</body>
</html>